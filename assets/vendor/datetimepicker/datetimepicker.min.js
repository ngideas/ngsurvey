/*!
 * Created by Greg Zhang
 *
 * Customized for NgSurvey
 * Using momemnt.js instead of dateutils
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(F){"use strict";function r(f,t){var L=this,k={defaults:{readonly:!1,disabled:!1,type:"date",format:"YYYY-MM-DD",placeholder:"Please pick a day",align:"left",startDate:null,endDate:null,lang:"en-US",rangeSeparator:"-",weekStart:0,defaultValue:"",zIndex:2008,onChange:null,onShow:null,onHide:null},_init:function(){(L=F.extend(!0,L,k.defaults,t||{})).lang&&(L=F.extend(L,F.fn.datepicker.lang[L.lang]));var e=L.type;"datetime"!==e&&"datetime-range"!==e||L.format!==k.defaults.format?"year"===e?L.format="YYYY":"month"===e&&L.format===k.defaults.format&&(L.format="YYYY-MM"):L.format="YYYY-MM-DD hh:mm:ss",L.date=new Date,L.value="",L.yearLabel=L.date.getFullYear(),L.monthLabel=L.date.getMonth(),L.readonly&&f.attr("readonly",!0),L.disabled&&f.attr("disabled",!0),L.placeholder&&f.attr("placeholder",L.placeholder),k._created()},_created:function(){var e,t,a=L.type,n=L.align,i=L.zIndex,r="center"===n?"50%":"right"===n?"100%":"0",l=F("body");switch("date"===a||"month"===a||"year"===a||"datetime"===a?("date"===a||"datetime"===a?L.currentView="dateView":"year"===a?L.currentView="yearView":"month"===a&&(L.currentView="monthView"),e=k._generateDateDOM()):"date-range"!==a&&"datetime-range"!==a||(e=k._generateRangeDateDOM()),L.$pickerPanel=F(e).appendTo(l).css({position:"absolute",zIndex:parseInt(i,10)}),(!o||o&&9<d)&&L.$pickerPanel.css({transformOrigin:r+" 0",msTransformOrigin:r+" 0"}),0<L.$pickerPanel.find(".gmi-time-panel").length&&((t=L.$pickerPanel.find(".gmi-time-panel")).css({width:"154px",position:"absolute",left:0,zIndex:2009}),L.$timePanel=t),F.isFunction(L.onChange)&&f.on("pick.datepicker",L.onChange),k._setDate(L.defaultValue),a){case"date":case"datetime":L.$pickerPanel.find(".gmi-date-table").show().siblings().hide();break;case"year":L.$pickerPanel.find(".gmi-year-table").show().siblings().hide();break;case"month":L.$pickerPanel.find(".gmi-month-table").show().siblings().hide()}k._echoDateOrTimeIntoInput(),k._bindEvent()},_unCreate:function(){var e=L.$pickerPanel;e&&0<e.length&&e.remove()},_bindEvent:function(){F(document).on("click.datepicker",function(e){var t=F(e.target);!t.is(f)&&f.has(t).length<=0&&k._hidePickerPanel()}),F(window).on("resize.datepicker",function(){k._setDatePanelPosition()}).on("scroll.datepicker",function(){k._setDatePanelPosition()}),f.on("focus.datepicker",k._elFocusHandler).on("click.datepicker",k._elClickHandler).on("change.datepicker",k._elChangeHandler).on("keyup.datepicker",k._elKeyUpHandler),F.isFunction(L.onShow)&&f.on("show.datepicker",L.onShow),F.isFunction(L.onHide)&&f.on("show.datepicker",L.onHide),L.$pickerPanel.on("click.datepicker",function(e){e.stopPropagation()}),L.$pickerPanel.on("focus.datepicker",".gmi-time-picker--input",function(e){var t=F(this);k._setTimeView(t,e)}).on("keyup.datepicker",".gmi-time-picker--input",function(e){var t=F(this);k._setTimeView(t,e)}).on("change.datepicker",".gmi-time-picker--input",function(e){var t=F(this);k._setTimeView(t,e)}),L.$timePanel&&0<L.$timePanel.length&&(L.$timePanel.on("mouseenter.datepicker",".gmi-time-panel__body__item",function(e){var t=F(this),a=t.find("> ul.gmi-time-panel__body__item--spinner");t.css("overflow","auto"),a.css("width","100%")}).on("mouseleave.datepicker",".gmi-time-panel__body__item",function(e){var t=F(this),a=t.find("> ul.gmi-time-panel__body__item--spinner"),n=t.outerWidth();t.css("overflow","hidden"),a.css("width",n+"px")}),L.$timePanel.on("click.datepicker",".gmi-time-panel__body__item--spinner__item:not(.disabled)",function(e){var t=F(this),a=t.parents(".gmi-time-panel__body__item").eq(0),n=(t.parents(".gmi-time-panel__body__item--spinner").data("role"),Number(t.text())*t.outerHeight());t.addClass("active").siblings().removeClass("active"),a.scrollTop(n),e.stopPropagation()}),L.$timePanel.on("click.datepicker",".gmi-time-panel__btn",function(e){var t=F(this).data("role"),a=new Date,n=F(e.delegateTarget),i=n.siblings(".gmi-time-picker--input"),r=n.find('.gmi-time-panel__body__item--spinner[data-role="hour"]'),l=n.find('.gmi-time-panel__body__item--spinner[data-role="min"]'),o=n.find('.gmi-time-panel__body__item--spinner[data-role="sec"]'),d=Number(r.find("> li.active").text()),s=Number(l.find("> li.active").text()),m=Number(o.find("> li.active").text());switch(a.setHours(d,s,m,0),t){case"confirm":i.val(F.formatDate(a,v)),n.hide();var c=L.$pickerPanel.find(".gmi-time-picker--input").filter(function(){return""===F(this).val()||!F.parseDate(F(this).val(),v)});c&&0===c.length&&L.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled");break;case"cancel":n.hide()}})),L.$pickerPanel.on("click.datepicker","td:not(.disabled)",function(e){var t,a,n,i,r,l,o,d,s,m=L.type,c=L.format,g=F(e.delegateTarget),p=g.find(".gmi-picker-panel__link-btn--determine"),u=F(this);if(e.stopPropagation(),"date"===m||"datetime"===m){var h,f,_=L.currentView;if("dateView"===_){var D=u.text()===L.todaySuffix?(new Date).getDate():Number(u.text());if(u.hasClass("prev-month")||u.hasClass("next-month")?(u.hasClass("prev-month")?(h=L.monthLabel-1<0?L.yearLabel-1:L.yearLabel,f=L.monthLabel-1<0?11:L.monthLabel-1):u.hasClass("next-month")&&(h=11<L.monthLabel+1?L.yearLabel+1:L.yearLabel,f=11<L.monthLabel+1?0:L.monthLabel+1),"date"===m?(a=F.formatDate(new Date(h,f,D),c),k._setDate(a)):(a=F.formatDate(new Date(h,f,D)),k._setNewDateDOM(g,h,f,D),g.find(".gmi-date-table td").removeClass("current").filter(function(){return Number(F(this).data("year"))===h&&Number(F(this).data("month"))===f&&Number(F(this).text())===D}).addClass("current"),L.yearLabel=h,L.monthLabel=f)):(h=L.yearLabel,f=L.monthLabel,"date"===m?(a=F.formatDate(new Date(h,f,D),c),k._setDate(a)):(a=F.formatDate(new Date(h,f,D)),g.find(".gmi-date-table").find("td").removeClass("current"),u.addClass("current"))),"datetime"===m)return g.find(".gmi-date-picker--input").val(a),""!==(t=g.find(".gmi-time-picker--input")).val()&&F.parseDate(t.val(),v)||t.val(y),p.removeClass("disabled"),!1;k._hidePickerPanel()}else"yearView"===_?k._setYearView(u):k._setMonthView(u)}else if("month"===m)switch(L.currentView){case"monthView":k._setMonthView(u);break;case"yearView":k._setYearView(u)}else{"year"===m?k._setYearView(u):"date-range"!==m&&"datetime-range"!==m||(n=L.minDate,i=L.maxDate,r=g.find('.gmi-date-picker--input[data-role="range-start"]'),l=g.find('.gmi-time-picker--input[data-role="range-start"]'),o=g.find('.gmi-date-picker--input[data-role="range-end"]'),d=g.find('.gmi-time-picker--input[data-role="range-end"]'),h=Number(u.data("year")),f=Number(u.data("month")),D=u.text()===L.todaySuffix?(new Date).getDate():Number(u.text()),n&&i?(L.minDate=new Date(h,f,D),L.maxDate=null,g.find(".gmi-date-table td").removeClass("start-date in-range end-date"),u.hasClass("prev-month")||u.hasClass("next-month")||u.addClass("start-date in-range"),"datetime-range"===m&&(r.val(F.formatDate(L.minDate)),p.addClass("disabled"))):n&&!i?new Date(h,f,D).getTime()<n.getTime()?(L.minDate=new Date(h,f,D),g.find(".gmi-date-table td").removeClass("start-date in-range"),u.hasClass("prev-month")||u.hasClass("next-month")||u.addClass("start-date in-range"),"datetime-range"===m&&(r.val(F.formatDate(L.minDate)),p.addClass("disabled"))):(L.maxDate=new Date(h,f,D),u.hasClass("prev-month")||u.hasClass("next-month")||u.addClass("end-date in-range"),g.find(".gmi-date-table td").filter(function(){var e=F(this),t=Number(e.data("year")),a=Number(e.data("month")),n=e.text()===L.todaySuffix?(new Date).getDate():Number(e.text()),i=new Date(t,a,n);return!e.hasClass("prev-month")&&!e.hasClass("next-month")&&i>L.minDate.getTime()&&i.getTime()<L.maxDate.getTime()}).addClass("in-range"),"date-range"===m?(s=F.formatDate(L.minDate,c)+" "+L.rangeSeparator+" "+F.formatDate(L.maxDate,c),k._setDate(s),k._hidePickerPanel()):(o.val(F.formatDate(L.maxDate)),""===l.val()&&l.val(y),""===d.val()&&d.val(y),p.removeClass("disabled"))):n||(L.minDate=new Date(h,f,D),u.hasClass("prev-month")||u.hasClass("next-month")||u.addClass("start-date in-range"),"datetime-range"===m&&(r.val(F.formatDate(L.minDate)),p.addClass("disabled"))))}}),L.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__label--month",function(e){var t=F(this),a=t.siblings(".gmi-date-picker__header__label--year"),n=F(e.delegateTarget),i=n.find(".gmi-month-table"),r=L.yearLabel,l=L.monthLabel;i.find("td").removeClass("current").eq(Number(l)).hasClass("disabled")||i.find("td").removeClass("current").eq(Number(l)).addClass("current"),a.text(r+" "+L.yearSuffix),t.hide(),k._setNewMonthDOM(n,l),L.currentView="monthView",e.stopPropagation()}),L.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__label--year",function(e){if("yearView"===L.currentView)return!1;var t=F(this),a=t.siblings(".gmi-date-picker__header__label--month"),n=F(e.delegateTarget),i=L.yearLabel;k._setNewYearDOM(n,i,t),a.hide(),L.currentView="yearView",e.stopPropagation()}),L.$pickerPanel.on("click.datepicker",".gmi-date-picker__header__icon-btn",function(e){var t=F(e.delegateTarget),a=F(this).data("action"),n=L.currentView;switch(a){case"prev":k._setPrevButtonAction(t,n);break;case"next":k._setNextButtonAction(t,n)}e.stopPropagation()}),L.$pickerPanel.on("click.datepicker",".gmi-picker-panel__link-btn:not(.gmi-time-panel__btn)",function(e){var t,a,n,i,r,l,o,d,s,m,c,g,p,u,h,f=F(this),_=F(e.delegateTarget),D=f.data("role"),b=L.type;switch(D){case"determine":if(f.hasClass("disabled"))return!1;"datetime"===b?(t=_.find(".gmi-date-picker--input").val(),a=_.find(".gmi-time-picker--input").val(),n=F.parseDate(t),i=F.parseDate(a,v),n.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),0),h=F.formatDate(n,L.format)):"datetime-range"===b&&(r=_.find('.gmi-date-picker--input[data-role="range-start"]').val(),l=_.find('.gmi-time-picker--input[data-role="range-start"]').val(),o=F.parseDate(r),d=F.parseDate(""!==l?l:y,v),o.setHours(d.getHours(),d.getMinutes(),d.getSeconds(),0),s=F.formatDate(o,L.format),m=_.find('.gmi-date-picker--input[data-role="range-end"]').val(),c=_.find('.gmi-time-picker--input[data-role="range-end"]').val(),g=F.parseDate(m),p=F.parseDate(""!==c?c:y,v),g.setHours(p.getHours(),p.getMinutes(),p.getSeconds(),0),u=F.formatDate(g,L.format),h=s+" "+L.rangeSeparator+" "+u),k._setDate(h),k._hidePickerPanel();break;case"now":h=F.formatDate(new Date,L.format),k._setDate(h),k._hidePickerPanel();break;case"clear":k._clear()}e.stopPropagation()}),L.$pickerPanel.on("click.datepicker",".gmi-date-range-picker__header__icon-btn",function(e){var t=F(e.delegateTarget),a=F(this).data("action");k._setRangeDateView(t,a),e.stopPropagation()}),L.$pickerPanel.on("mouseenter.datepicker","td:not(.disabled)",function(e){if("date-range"!==L.type&&"datetime-range"!==L.type)return!1;var t=F(e.delegateTarget),a=F(this),n=Number(a.data("year")),i=Number(a.data("month")),r=a.text()===L.todaySuffix?(new Date).getDate():Number(a.text()),l=new Date(n,i,r),o=L.minDate,d=L.maxDate;o&&!d&&(L.$minDateTarget=t.find(".gmi-date-table td").filter(function(){return!F(this).hasClass("prev-month")&&!F(this).hasClass("next-month")&&Number(F(this).data("year"))===o.getFullYear()&&Number(F(this).data("month"))===o.getMonth()&&(F(this).text()===L.todaySuffix?(new Date).getDate():Number(F(this).text()))===o.getDate()}),L.$minDateTarget.hasClass("start-date")||L.$minDateTarget.addClass("in-range start-date"),l.getTime()>=o.getTime()&&(t.find(".gmi-date-table td").filter(function(){var e=Number(F(this).data("year")),t=Number(F(this).data("month")),a=F(this).text()===L.todaySuffix?(new Date).getDate():Number(F(this).text());return!F(this).hasClass("prev-month")&&!F(this).hasClass("next-month")&&new Date(e,t,a).getTime()>o.getTime()&&new Date(e,t,a).getTime()<new Date(n,i,r).getTime()}).addClass("in-range"),a.hasClass("prev-month")||a.hasClass("next-month")?t.find(".gmi-date-table td").filter(function(){var e=Number(F(this).data("year")),t=Number(F(this).data("month")),a=F(this).text()===L.todaySuffix?(new Date).getDate():Number(F(this).text());return!F(this).hasClass("prev-month")&&!F(this).hasClass("next-month")&&e===n&&t===i&&a===r}).addClass("in-range end-date"):a.addClass("in-range end-date"))),e.stopPropagation()}).on("mouseleave.datepicker","td:not(.disabled)",function(e){if("date-range"!==L.type&&"datetime-range"!==L.type)return!1;var t=F(e.delegateTarget),a=F(this),n=Number(a.data("year")),i=Number(a.data("month")),r=a.text()===L.todaySuffix?(new Date).getDate():Number(a.text()),l=L.minDate,o=L.maxDate;l&&!o&&(t.find(".gmi-date-table td").filter(function(){return!F(this).hasClass("start-date")&&!F(this).hasClass("end-date")}).removeClass("in-range"),a.hasClass("prev-month")||a.hasClass("next-month")?t.find(".gmi-date-table td").filter(function(){var e=Number(F(this).data("year")),t=Number(F(this).data("month")),a=F(this).text()===L.todaySuffix?(new Date).getDate():Number(F(this).text());return!F(this).hasClass("prev-month")&&!F(this).hasClass("next-month")&&e===n&&t===i&&a===r}).removeClass("in-range end-date"):a.removeClass("in-range end-date")),e.stopPropagation()})},_unBindEvent:function(){f.off("focus.datepicker",k._elFocusHandler),f.off("click.datepicker",k._elClickHandler),f.off("change.datepicker",k._elChangeHandler),f.off("keyup.datepicker",k._elKeyUpHandler),f.off("pick.datepicker",L.onChange),f.off("show.datepicker",L.onShow),f.off("hide.datepicker",L.onHide)},_generateDateDOM:function(){var e=L.type,t="datetime"===e?"has-time":"",a="datetime"===e?k._generateDatetimeHeader():"",n="datetime"===e?k._generateDatetimeFooter(e):"",i=10*Math.floor(L.date.getFullYear()/10),r=10*Math.floor(L.date.getFullYear()/10)+9,l="date"===e||"month"===e||"datetime"===e?L.date.getFullYear()+" "+L.yearSuffix:i+" "+L.yearSuffix+" - "+r+" "+L.yearSuffix,o=L.monthsShort[L.date.getMonth()];return'<div data-role="'+e+'" class="gmi-picker-panel gmi-date-picker '+t+'" style="display: none;"><div class="gmi-picker-panel__body">'+a+'<div class="gmi-picker-panel__body__header"><span class="gmi-date-picker__header__label--year">'+l+"</span>"+("date"===e||"datetime"===e?'<span class="gmi-date-picker__header__label--month">'+o+"</span>":"")+'<em data-action="next" class="gmi-date-picker__header__icon-btn gmi-picker-panel__btn--next"></em><em data-action="prev" class="gmi-date-picker__header__icon-btn gmi-picker-panel__btn--prev"></em></div><div class="gmi-picker-panel__body__main">'+k._getDateTable(L.date)+k._getYearTable(L.date.getFullYear())+k._getMonthTable(L.date.getMonth())+"</div></div>"+n+"</div>"},_generateRangeDateDOM:function(){var e=L.date,t=L.minDate?L.minDate:e,a=L.minDate?F.getNextMonth(L.minDate):F.getNextMonth(e),n=L.type,i="datetime-range"===n?"has-time":"",r="datetime-range"===n?k._generateRangeDatetimeHeader():"",l="datetime-range"===n?k._generateDatetimeFooter(n):"";return'<div data-role="'+n+'" class="gmi-picker-panel gmi-date-range-picker '+i+'" style="display: none;">'+r+'<div class="gmi-picker-panel__body gmi-date-range-picker__body"><div class="gmi-picker-panel__body__main f-lt"><div class="gmi-date-range-picker__body__header"><p>'+t.getFullYear()+" "+L.yearSuffix+" "+L.monthsShort[t.getMonth()]+'</p><em data-action="prev-year" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--prev gmi-date-range-picker__btn--prev-year"></em><em data-action="prev-month" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--prev gmi-date-range-picker__btn--prev-month"></em></div>'+k._getDateTable(t)+'</div><div class="gmi-picker-panel__body__main f-rt"><div class="gmi-date-range-picker__body__header"><p>'+a.getFullYear()+" "+L.yearSuffix+" "+L.monthsShort[a.getMonth()]+'</p><em data-action="next-year" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--next gmi-date-range-picker__btn--next-year"></em><em data-action="next-month" class="gmi-date-range-picker__header__icon-btn gmi-date-range-picker__btn--next gmi-date-range-picker__btn--next-month"></em></div>'+k._getDateTable(a)+"</div></div>"+l+"</div>"},_generateDatetimeHeader:function(){return'<ul class="gmi-picker-panel__body__header--time"><li class="gmi-picker-panel__body__header--time__wrapper"><div class="gmi-input"><input data-role="date" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+L.dateInputPlaceholder+'"></div></li><li class="gmi-picker-panel__body__header--time__wrapper"><div data-role="date" class="gmi-input gmi-time-picker--wrapper"><input data-role="date" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+L.dateTimeInputPlaceholder+'">'+k._generateTimePickerDOM("date")+"</div></li></ul>"},_generateRangeDatetimeHeader:function(){return'<ul class="gmi-picker-panel__body__header--time"><li class="gmi-picker-panel__body__header--time__wrapper gmi-date-range-picker__header--time__wrapper"><div class="gmi-input"><input data-role="range-start" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+L.rangeStartInputPlaceholder+'"></div><div data-role="range-start" class="gmi-input gmi-time-picker--wrapper"><input data-role="range-start" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+L.rangeStartTimeInputPlaceholder+'">'+k._generateTimePickerDOM("range-start")+'</div></li><li class="gmi-picker-panel__body__header--time__wrapper gmi-date-range-picker__header--time__wrapper"><div class="gmi-input"><input data-role="range-end" type="text" readonly class="gmi-input__inner gmi-date-picker--input" placeholder="'+L.rangeEndPlaceholder+'"></div><div data-role="range-end" class="gmi-input gmi-time-picker--wrapper"><input data-role="range-end" type="text" class="gmi-input__inner gmi-time-picker--input" placeholder="'+L.rangeEndTimeInputPlaceholder+'">'+k._generateTimePickerDOM("range-end")+"</div></li></ul>"},_generateDatetimeFooter:function(e){return'<div class="gmi-picker-panel__footer"><a href="JavaScript:" data-role="'+("datetime-range"===e?"clear":"now")+'" class="gmi-picker-panel__link-btn '+("datetime-range"===e?"gmi-picker-panel__link-btn--clear":"gmi-picker-panel__link-btn--now")+'">'+("datetime-range"===e?L.clearButton:L.nowDateButton)+'</a><a href="JavaScript:" data-role="determine" class="gmi-picker-panel__link-btn gmi-picker-panel__link-btn--determine '+("datetime-range"===e&&L.minDate&&L.maxDate||"datetime"===e?"":"disabled")+'">'+L.confirmDateButton+"</a></div>"},_generateTimePickerDOM:function(e){return'<div data-role="'+e+'" class="gmi-time-panel gmi-time-picker" style="display: none;"><div class="gmi-time-panel__body"><div class="gmi-time-panel__body__item">'+k._getTimeSpinner("hour")+'</div><div class="gmi-time-panel__body__item">'+k._getTimeSpinner("min")+'</div><div class="gmi-time-panel__body__item">'+k._getTimeSpinner("sec")+'</div></div><div class="gmi-picker-panel__footer gmi-time-panel__footer"><a href="JavaScript:" data-role="cancel" class="gmi-picker-panel__link-btn gmi-time-panel__btn gmi-picker-panel__link-btn--default">'+L.cancelTimeButton+'</a><a href="JavaScript:" data-role="confirm" class="gmi-picker-panel__link-btn gmi-time-panel__btn gmi-picker-panel__link-btn--primary">'+L.confirmDateButton+"</a></div></div>"},_getDateRows:function(e){for(var t,a=e.getFullYear(),n=e.getMonth(),i=new Date(a,n,1),r=F.getFirstDayOfMonth(i),l=F.getTotalDayCountOfMonth(i.getFullYear(),i.getMonth()),o=F.getTotalDayCountOfMonth(i.getFullYear(),0===i.getMonth()?11:i.getMonth()-1),r=0===r?7:r,d=-1*L.weekStart,s=[[],[],[],[],[],[]],m=1,c=F.getStartDateOfMonth(a,n),g=F.clearHours(new Date),p=0;p<6;p++)for(var u=s[p],h=0;h<7;h++){var f=u[h];(f=f||{row:p,column:h,type:"normal",year:i.getFullYear(),month:i.getMonth(),inRange:!1,start:!1,end:!1}).type="normal";var _=7*p+h,D=c.getTime()+b*(_-d);f.inRange=D>=F.clearHours(L.minDate)&&D<=F.clearHours(L.maxDate),f.start=L.minDate&&D===F.clearHours(L.minDate),f.end=L.maxDate&&D===F.clearHours(L.maxDate),f.disabled=!1,L.startDate&&w(L.startDate)&&D<F.clearHours(L.startDate)&&(f.disabled=!0),L.endDate&&w(L.endDate)&&D>F.clearHours(L.endDate)&&(f.disabled=!0),D===g&&(f.type="today"),0<=p&&p<=1?r+d<=h+7*p?(f.text=m++,2===m&&(t=7*p+h),f.year=i.getFullYear(),f.month=i.getMonth()):(f.text=o-(r+d-h%7)+1+7*p,f.type="prev-month",f.year=0===i.getMonth()?i.getFullYear()-1:i.getFullYear(),f.month=0===i.getMonth()?11:i.getMonth()-1):m<=l?(f.text=m++,2===m&&(t=7*p+h),f.year=i.getFullYear(),f.month=i.getMonth()):(f.text=m++-l,f.type="next-month",f.year=11===i.getMonth()?i.getFullYear()+1:i.getFullYear(),f.month=11===i.getMonth()?0:i.getMonth()+1),u[h]=F.extend({},f)}return s.firstDayPosition=t,s},_getWeekDayRows:function(){var e=L.daysMin;return L.weekStart&&(e=e.slice(L.weekStart).concat(e.slice(0,L.weekStart))),e},_getYearRows:function(e){for(var t=10*Math.floor(e/10),a=[[],[],[]],n=0;n<3;n++)for(var i=a[n],r=0;r<4;r++){var l=4*n+r;if(9<l)break;i[r]=t+l}return a},_getMonthRows:function(){for(var e=[[],[],[]],t=L.monthsShort,a=0,n=0;n<t.length;n++){var i=t[n];n%4==0&&0!==n&&a++,e[a].push(i)}return e},_getTimeSpinnerData:function(e){var t=[];switch(e){case"hour":for(var a=0;a<=23;a++)t.push(a);break;case"min":for(var n=0;n<=59;n++)t.push(n);break;case"sec":for(var i=0;i<=59;i++)t.push(i)}return t},_getDateTable:function(e){var t=k._getDateRows(e),a=k._getWeekDayRows(),n=L.type,i='<table cellspacing="0" cellpadding="0" class="gmi-date-table" '+("date-range"===n||"datetime-range"===n?"":'style="display:none;"')+"><tbody>";i+="<tr>";for(var r=0;r<a.length;r++)i+="<th>"+a[r]+"</th>";i+="</tr>";for(var l=0;l<t.length;l++){var o=t[l];i+='<tr class="gmi-date-table__row">';for(var d=0;d<o.length;d++){var s=o[d],m=k._getCellClasses(s),c="today"===s.type?L.todaySuffix:s.text;i+='<td data-year="'+s.year+'" data-month="'+s.month+'" class="'+m+'">'+c+"</td>"}i+="</tr>"}return i+="</tbody></table>"},_getYearTable:function(e){for(var t=k._getYearRows(e),a=L.startDate&&w(L.startDate)?L.startDate.getFullYear():null,n=L.endDate&&w(L.endDate)?L.endDate.getFullYear():null,i='<table class="gmi-year-table" style="display:none;"><tbody>',r=0;r<t.length;r++){var l=t[r];i+="<tr>";for(var o=0;o<l.length;o++){var d=l[o],s=n&&n<d?!0:a&&d<a?!0:!1;i+='<td class="available '+(e!==d||s?"":"current")+" "+(s?"disabled":"")+'"><span class="cell">'+d+"</span></td>"}i+="</tr>"}return i+="</tbody></table>"},_getMonthTable:function(e){for(var t=k._getMonthRows(),a=L.startDate&&w(L.startDate)?L.startDate.getFullYear():null,n=L.startDate&&w(L.startDate)?L.startDate.getMonth():null,i=a&&n?new Date(a,n,1).getTime():null,r=L.endDate&&w(L.endDate)?L.endDate.getFullYear():null,l=L.endDate&&w(L.endDate)?L.endDate.getMonth():null,o=r&&l?new Date(r,l,1).getTime():null,d='<table class="gmi-month-table" style="display:none;"><tbody>',s=0;s<t.length;s++){var m=t[s];d+="<tr>";for(var c=0;c<m.length;c++){var g=m[c],p=!1;i&&new Date(L.yearLabel,4*s+c,1)<i&&(p=!0),o&&new Date(L.yearLabel,4*s+c,1)>o&&(p=!0);var u=p?"disabled":"",h=e!==4*s+c||p?"":"current";d+='<td data-year="'+L.date.getFullYear()+'" data-month="'+(4*s+c)+'" class="'+h+" "+u+'"><span class="cell">'+g+"</span></td>"}d+="</tr>"}return d+="</tbody></table>"},_getTimeSpinner:function(e){for(var t=k._getTimeSpinnerData(e),a='<ul data-role="'+e+'" class="gmi-time-panel__body__item--spinner">',n=0;n<t.length;n++)a+='<li class="gmi-time-panel__body__item--spinner__item">'+t[n]+"</li>";return a+="</ul>"},_echoDateOrTimeIntoInput:function(){var e,t,a,n,i,r,l,o,d,s,m,c,g=L.type;"datetime"===g?(e=L.$pickerPanel.find(".gmi-date-picker--input"),t=L.$pickerPanel.find(".gmi-time-picker--input"),a=F.formatDate(L.date),n=F.formatDate(L.date,v),e.val(a),t.val(n)):"datetime-range"===g&&(i=L.$pickerPanel.find(".gmi-date-picker--input").filter('[data-role="range-start"]'),r=L.$pickerPanel.find(".gmi-date-picker--input").filter('[data-role="range-end"]'),l=L.$pickerPanel.find(".gmi-time-picker--input").filter('[data-role="range-start"]'),o=L.$pickerPanel.find(".gmi-time-picker--input").filter('[data-role="range-end"]'),c=L.minDate&&L.maxDate?(d=F.formatDate(L.minDate),s=F.formatDate(L.minDate,v),m=F.formatDate(L.maxDate),F.formatDate(L.maxDate,v)):(d=F.formatDate(L.date),s=F.formatDate(L.date,v),m=F.formatDate(L.date),F.formatDate(L.date,v)),i.val(d),l.val(s),r.val(m),o.val(c))},_echoTimeIntoSpinner:function(e,t){var a=L.type;if("datetime"===a){var n=e&&"object"==typeof e?e.hour:L.date.getHours(),i=e&&"object"==typeof e?e.min:L.date.getMinutes(),r=e&&"object"==typeof e?e.sec:L.date.getSeconds(),l=L.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=hour]"),o=L.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=min]"),d=L.$timePanel.find(".gmi-time-panel__body__item--spinner[data-role=sec]"),s=l.children("li").filter(function(){return Number(F(this).text())===n}),m=o.children("li").filter(function(){return Number(F(this).text())===i}),c=d.children("li").filter(function(){return Number(F(this).text())===r}),g=s.outerHeight();if(L.$timePanel.show(),!(0<s.length&&0<m.length&&0<c.length))return;s.addClass("active").siblings().removeClass("active"),m.addClass("active").siblings().removeClass("active"),c.addClass("active").siblings().removeClass("active"),l.parent().scrollTop(n*g),o.parent().scrollTop(i*g),d.parent().scrollTop(r*g)}else if("datetime-range"===a)if("range-start"===t){var p=e&&"object"==typeof e?e.minHour:L.minDate?L.minDate.getHours():L.date.getHours(),u=e&&"object"==typeof e?e.minMin:L.minDate?L.minDate.getMinutes():L.date.getMinutes(),h=e&&"object"==typeof e?e.minSec:L.minDate?L.minDate.getSeconds():L.date.getSeconds(),f=L.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=hour]"),_=L.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=min]"),D=L.$timePanel.filter('[data-role="range-start"]').find(".gmi-time-panel__body__item--spinner[data-role=sec]"),b=f.children("li").filter(function(){return Number(F(this).text())===p}),k=_.children("li").filter(function(){return Number(F(this).text())===u}),v=D.children("li").filter(function(){return Number(F(this).text())===h}),y=b.outerHeight();if(L.$timePanel.filter('[data-role="range-start"]').show(),!(0<b.length&&0<k.length&&0<v.length))return;b.addClass("active").siblings().removeClass("active"),k.addClass("active").siblings().removeClass("active"),v.addClass("active").siblings().removeClass("active"),f.parent().scrollTop(p*y),_.parent().scrollTop(u*y),D.parent().scrollTop(h*y)}else if("range-end"===t){var w=e&&"object"==typeof e?e.maxHour:L.maxDate?L.maxDate.getHours():L.date.getHours(),x=e&&"object"==typeof e?e.maxMin:L.maxDate?L.maxDate.getMinutes():L.date.getMinutes(),P=e&&"object"==typeof e?e.maxSec:L.maxDate?L.maxDate.getSeconds():L.date.getSeconds(),M=L.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=hour]"),T=L.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=min]"),C=L.$timePanel.filter('[data-role="range-end"]').find(".gmi-time-panel__body__item--spinner[data-role=sec]"),S=M.children("li").filter(function(){return Number(F(this).text())===w}),Y=T.children("li").filter(function(){return Number(F(this).text())===x}),N=C.children("li").filter(function(){return Number(F(this).text())===P}),$=S.outerHeight();if(L.$timePanel.filter('[data-role="range-end"]').show(),!(0<S.length&&0<Y.length&&0<N.length))return;S.addClass("active").siblings().removeClass("active"),Y.addClass("active").siblings().removeClass("active"),N.addClass("active").siblings().removeClass("active"),M.parent().scrollTop(w*$),T.parent().scrollTop(x*$),C.parent().scrollTop(P*$)}},_getCellClasses:function(e){var t=L.type,a=[];return"normal"===e.type||"today"===e.type&&!e.disabled?(a.push("available"),"today"===e.type&&a.push("today")):a.push(e.type),"date"!==t&&"datetime"!==t||"normal"!==e.type&&"today"!==e.type||Number(e.year)!==L.date.getFullYear()||Number(e.month)!==L.date.getMonth()||Number(e.text)!==L.date.getDate()||a.push("current"),!e.inRange||"date-range"!==t&&"datetime-range"!==t||"normal"!==e.type&&"today"!==e.type||(a.push("in-range"),e.start&&a.push("start-date"),e.end&&a.push("end-date")),e.disabled&&a.push("disabled"),a.join(" ")},_setDate:function(e){var t,a,n,i,r,l,o,d,s=L.type,m=L.format;if(e){if("string"==typeof e)if("date-range"===s||"datetime-range"===s){if(e!==L.value){L.date=e.split(" "+L.rangeSeparator+" ");var c=F.parseDate(L.date[0],m),g=F.parseDate(L.date[1],m),p=L.startDate&&w(L.startDate)?new Date(F.clearHours(L.startDate)):null,u=L.endDate&&w(L.endDate)?new Date(F.clearHours(L.endDate)):null;if(p&&(c.getTime()<p.getTime()||g.getTime()<p.getTime())&&(e=""),u&&(c.getTime()>u.getTime()||g.getTime()>u.getTime())&&(e=""),e&&""!==e){if(!(g.getTime()>=c.getTime()))throw new Error("The maximum date must be greater than or equal to the minimum date");k._trigger("pick.datepicker",{newDate:e,oldDate:L.value}),L.value=e,L.minDate=c,L.maxDate=g,k._setRangeDateView(L.$pickerPanel),"datetime-range"===s&&(L.$pickerPanel.find('.gmi-date-picker--input[data-role="range-start"]').val(F.formatDate(c)),L.$pickerPanel.find('.gmi-date-picker--input[data-role="range-end"]').val(F.formatDate(g)),L.$pickerPanel.find('.gmi-time-picker--input[data-role="range-start"]').val(F.formatDate(c,v)),L.$pickerPanel.find('.gmi-time-picker--input[data-role="range-end"]').val(F.formatDate(g,v)),L.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled")),f.val(e)}else L.date=new Date,L.limitStartDate=new Date}}else"date"===s||"datetime"===s?L.date.getTime()!==(t=F.parseDate(e,m)).getTime()&&(k._trigger("pick.datepicker",{newDate:e,oldDate:F.formatDate(L.date,m)}),L.value=e,L.date=t,L.yearLabel=t.getFullYear(),L.monthLabel=t.getMonth(),k._setNewDateDOM(L.$pickerPanel,t.getFullYear(),t.getMonth(),t.getDate()),"datetime"===s&&(L.$pickerPanel.find(".gmi-date-picker--input").val(F.formatDate(t)),L.$pickerPanel.find(".gmi-time-picker--input").val(F.formatDate(t,v)),L.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").removeClass("disabled")),f.val(e)):"month"===s?(a=F.formatDate(L.date,m),n=e,i=L.date.getTime(),new Date(F.parseDate(n,m).getFullYear(),F.parseDate(n,m).getMonth(),1).getTime()!==i&&(k._trigger("pick.datepicker",{newDate:n,oldDate:a}),F.parseDate(n,m).getFullYear()!==L.date.getFullYear()&&(L.$pickerPanel.find(".gmi-date-picker__header__label--year").text(F.parseDate(n,m).getFullYear()+" "+L.yearSuffix),L.$pickerPanel.find(".gmi-month-table td").attr("data-year",F.parseDate(n,m).getFullYear()).data("year",F.parseDate(n,m).getFullYear())),L.value=e,L.date=new Date(F.parseDate(n,m).getFullYear(),F.parseDate(n,m).getMonth(),1),L.yearLabel=F.parseDate(n,m).getFullYear(),L.monthLabel=F.parseDate(n,m).getMonth(),k._setNewMonthDOM(L.$pickerPanel,F.parseDate(n,m).getMonth()),f.val(n))):"year"===s&&(r=L.date.getFullYear(),l=10*Math.floor(r/10),o=Number(e),d=10*Math.floor(o/10),r!==o&&(k._trigger("pick.datepicker",{newDate:e,oldDate:r}),L.value=e,L.date=new Date(o,0,1),L.yearLabel=o,l==d?L.$pickerPanel.find(".gmi-year-table td").removeClass("current").filter(function(){return Number(F(this).text())===o}).addClass("current"):k._setNewYearDOM(L.$pickerPanel,o),f.val(o)));else if(w(e)){if("date-range"===s||"datetime-range"===s)return;var h=F.formatDate(e,m);k._setDate(h)}}else L.date=new Date,L.limitStartDate=new Date,"date-range"===L.type&&"datetime-range"===L.type||(L.yearLabel=L.date.getFullYear(),L.monthLabel=L.date.getMonth())},_setPrevButtonAction:function(e,t){var a,n,i;switch(t){case"dateView":i=L.monthLabel-1<0?11:L.monthLabel-1,n=L.monthLabel-1<0?L.yearLabel-1:L.yearLabel,k._setNewDateDOM(e,n,i),L.yearLabel=n,L.monthLabel=i;break;case"monthView":a=e.find(".gmi-date-picker__header__label--year"),n=L.yearLabel-1,i=L.monthLabel,a.text(n+" "+L.yearSuffix),L.yearLabel=n,k._setNewMonthDOM(e,i);break;case"yearView":n=L.yearLabel-10,k._setNewYearDOM(e,n),L.yearLabel=n}},_setNextButtonAction:function(e,t){var a,n,i;switch(t){case"dateView":i=11<L.monthLabel+1?0:L.monthLabel+1,n=11<L.monthLabel+1?L.yearLabel+1:L.yearLabel,k._setNewDateDOM(e,n,i),L.yearLabel=n,L.monthLabel=i;break;case"monthView":a=e.find(".gmi-date-picker__header__label--year"),n=L.yearLabel+1,i=L.monthLabel,a.text(n+" "+L.yearSuffix),L.yearLabel=n,k._setNewMonthDOM(e,i);break;case"yearView":n=L.yearLabel+10,k._setNewYearDOM(e,n),L.yearLabel=n}},_setNewDateDOM:function(e,t,a,n){var i=k._getDateTable(new Date(t,a,n||1)),r=e.find(".gmi-picker-panel__body__main"),l=e.find(".gmi-date-picker__header__label--year"),o=e.find(".gmi-date-picker__header__label--month");l.text(t+" "+L.yearSuffix),o.show().text(L.monthsShort[a]),e.find(".gmi-date-table").remove(),F(i).appendTo(r).show().find("td").removeClass("current").filter(function(){return!F(this).hasClass("prev-month")&&!F(this).hasClass("next-month")&&t===L.date.getFullYear()&&a===L.date.getMonth()&&(F(this).text()===L.todaySuffix?(new Date).getDate():Number(F(this).text()))===L.date.getDate()}).addClass("current")},_setNewYearDOM:function(e,t,a){var n=e.find(".gmi-picker-panel__body__main"),a=a&&0<a.length?a:e.find(".gmi-date-picker__header__label--year"),i=e.find(".gmi-year-table"),r=10*Math.floor(t/10),l=9+r,o=k._getYearTable(t);i.remove(),F(o).appendTo(n).show().find("td").removeClass("current").filter(function(){return!F(this).hasClass("disabled")&&Number(F(this).text())===t}).addClass("current"),e.find(".gmi-year-table").siblings("table").hide(),a.text(r+" "+L.yearSuffix+" - "+l+" "+L.yearSuffix)},_setNewMonthDOM:function(e,t){var a=e.find(".gmi-picker-panel__body__main"),n=e.find(".gmi-month-table"),i=k._getMonthTable(t);n.remove(),F(i).appendTo(a).show(),e.find(".gmi-month-table").siblings("table").hide()},_setYearView:function(e){var t,a=L.$pickerPanel.find(".gmi-year-table"),n=L.$pickerPanel.find(".gmi-date-picker__header__label--year"),i=L.type,r=Number(e.text());a.find("td").removeClass("current"),e.addClass("current"),"date"===i||"datetime"===i||"month"===i?(a.hide(),n.text(r+" "+L.yearSuffix),L.yearLabel=r,k._setNewMonthDOM(L.$pickerPanel,L.date.getMonth()),L.currentView="monthView"):"year"===i&&(t=L.date.getTime(),new Date(r,0,1).getTime()!==t&&(k._trigger("pick.datepicker",{newDate:F.formatDate(new Date(r,0,1),L.format),oldDate:F.formatDate(L.date,L.format)}),L.date=new Date(r,0,1),L.value=r,L.yearLabel=r),f.val(F.formatDate(new Date(r,0,1),L.format)),k._hidePickerPanel())},_setMonthView:function(e){var t,a=L.$pickerPanel,n=a.find(".gmi-month-table"),i=L.type,r=L.yearLabel,l=Number(e.data("month"));n.find("td").removeClass("current"),e.addClass("current"),"date"===i||"datetime"===i?(k._setNewDateDOM(a,r,l),n.hide(),L.currentView="dateView"):"month"===i&&(t=L.date.getTime(),new Date(r,l,1).getTime()!==t&&(k._trigger("pick.datepicker",{newDate:F.formatDate(new Date(r,l,1),L.format),oldDate:F.formatDate(L.date,L.format)}),L.date=new Date(r,l,1)),L.value=F.formatDate(new Date(r,l,1),L.format),f.val(F.formatDate(new Date(r,l,1),L.format)),k._hidePickerPanel()),L.monthLabel=l},_setRangeDateView:function(e,t){var a,n,i,r,l,o=e.find(".gmi-picker-panel__body__main.f-lt"),d=o.find(".gmi-date-range-picker__body__header > p"),s=e.find(".gmi-picker-panel__body__main.f-rt"),m=s.find(".gmi-date-range-picker__body__header > p"),c=L.limitStartDate;switch(t){case"next-year":a="getNextYear";break;case"next-month":a="getNextMonth";break;case"prev-year":a="getPrevYear";break;case"prev-month":a="getPrevMonth";break;default:a="normal"}n="normal"===a?L.minDate:F[a](c),L.limitStartDate=n,i=F.getNextMonth(n),r=k._getDateTable(n),l=k._getDateTable(i),e.find(".gmi-date-table").remove(),F(r).appendTo(o).show(),F(l).appendTo(s).show(),d.text(n.getFullYear()+" "+L.yearSuffix+" "+L.monthsShort[n.getMonth()]),m.text(i.getFullYear()+" "+L.yearSuffix+" "+L.monthsShort[i.getMonth()])},_setTimeView:function(e,t){var a=t.type,n="keyup"===a?t.which:null;if(""===e.val()&&L.$pickerPanel.find(".gmi-picker-panel__link-btn--determine").addClass("disabled"),"focusin"===a||"change"===a||"keyup"===a&&n&&13===n){var i=""!==e.val()&&F.parseDate(e.val(),v)?F.parseDate(e.val(),v).getHours():0,r=""!==e.val()&&F.parseDate(e.val(),v)?F.parseDate(e.val(),v).getMinutes():0,l=""!==e.val()&&F.parseDate(e.val(),v)?F.parseDate(e.val(),v).getSeconds():0,o=e.data("role"),d={};switch(o){case"date":d.hour=i,d.min=r,d.sec=l;break;case"range-start":d.minHour=i,d.minMin=r,d.minSec=l;break;case"range-end":d.maxHour=i,d.maxMin=r,d.maxSec=l}}k._echoTimeIntoSpinner(d,o)},_echoInputValue:function(e){"date-range"===L.type||"datetime-range"===L.type?k._setDate(e):F.parseDate(e,L.format)&&(k._setDate(F.formatDate(F.parseDate(e,L.format),L.format)),F(this).val(F.formatDate(F.parseDate(e,L.format),L.format)))},_getDatePanelPosition:function(){var e=F(window).height(),t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=f.outerHeight(),n=L.$pickerPanel.outerHeight(),i=f.offset().top,r=f.offset().left,l="left"===L.align?"placement-left-bottom":"center"===L.align?"placement-center-bottom":"placement-right-bottom";return n<i-t&&e<i-t+a+n?(i-=n+2*Number(L.$pickerPanel.css("margin-top").replace(/px/,"")),L.$pickerPanel.addClass(l)):(i+=a,L.$pickerPanel.removeClass(l)),{top:i,left:r}},_setDatePanelPosition:function(){var e,t,a=f.outerWidth(),n=k._getDatePanelPosition();if(0<L.$pickerPanel.length){switch(e=L.$pickerPanel.outerWidth(),L.align){case"left":t=n.left;break;case"center":t=n.left-Math.abs(e-a)/2;break;case"right":t=n.left-Math.abs(e-a)}L.$pickerPanel.css({top:n.top+"px",left:t+"px"})}},_clear:function(){var e=L.type,t=L.$pickerPanel,a=t.find(".gmi-picker-panel__link-btn--determine"),n=t.find(".gmi-date-picker__header__label--year");t.find(".gmi-date-picker--input, .gmi-time-picker--input").val(""),0<a.length&&a.addClass("disabled"),""!==L.value&&(k._trigger("pick.datepicker",{newDate:"",oldDate:L.value}),f.val(""),L.date=new Date,L.value="",L.yearLabel=L.date.getFullYear(),L.monthLabel=L.date.getMonth()),"date-range"===e||"datetime-range"===e?(t.find(".gmi-date-table td").removeClass("start-date in-range end-date"),L.minDate=null,L.maxDate=null):"year"===e?k._setNewYearDOM(t,L.yearLabel,n):"month"===e?(n.text(L.yearLabel+" "+L.yearSuffix),k._setNewMonthDOM(t,L.monthLabel)):k._setNewDateDOM(t,L.yearLabel,L.monthLabel,(new Date).getDate())},_showPickerPanel:function(){L.$pickerPanel.is(":hidden")&&(L.$pickerPanel.show(),k._setDatePanelPosition(),a(L.$pickerPanel,"picker-show",function(){k._trigger("show.datepicker")}))},_hidePickerPanel:function(){var e=L.type,t=L.currentView;if(!L.$pickerPanel.is(":hidden"))if("date-range"===e||"datetime-range"===e||"month"===e||"year"===e)a(L.$pickerPanel,"picker-hide",function(){L.$pickerPanel.hide(),k._trigger("hide.datepicker")});else{switch(t){case"yearView":L.$pickerPanel.find(".gmi-date-picker__header__label--year").text(L.yearLabel+" "+L.yearSuffix).siblings(".gmi-date-picker__header__label--month").show();break;case"monthView":L.$pickerPanel.find(".gmi-date-picker__header__label--month").show()}a(L.$pickerPanel,"picker-hide",function(){L.$pickerPanel.hide().find(".gmi-date-table").show().siblings("table").hide(),k._trigger("hide.datepicker")})}},_elFocusHandler:function(){k._showPickerPanel()},_elClickHandler:function(e){e.stopPropagation()},_elChangeHandler:function(){var e=F(this).val();k._echoInputValue(e)},_elKeyUpHandler:function(e){var t=e.which,a=F(this).val();13===t&&k._echoInputValue(a)},_trigger:function(e,t){var a=F.Event(e,t);return f.trigger(a),a}};L.version="1.0.15",L.setDate=function(e){k._setDate(e)},L.getDate=function(){return L.value},L.show=function(){k._showPickerPanel()},L.hide=function(){k._hidePickerPanel()},L.clear=function(){k._clear()},L.disable=function(e){f.attr("disabled",e),k._hidePickerPanel()},L.destroy=function(){k._unBindEvent(),k._unCreate(),f.removeData("datepicker")},k._init()}var b=864e5,v="HH:mm:ss",y="00:00:00",e="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),o=e&&/msie|trident/.test(e),d=document.documentMode;function l(e,t){var a=[];return Array.from?Array.from(e).slice(t||0):("number"!=typeof t||isNaN(t)||a.push(t),a.slice.apply(e,a))}function w(e){return"object"==typeof e&&e instanceof Date}function a(e,t,a){e.removeClass(t).addClass(t).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){F(this).removeClass(t),a.apply(e,l(arguments))}),o&&d<=9&&(e.removeClass(t),a.apply(e,l(arguments)))}r.LANG={"en-US":{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],yearSuffix:"",monthSuffix:"",todaySuffix:"Today",dateInputPlaceholder:"Select date",rangeStartInputPlaceholder:"Start Date",rangeEndPlaceholder:"End Date",dateTimeInputPlaceholder:"Select time",rangeStartTimeInputPlaceholder:"Start Time",rangeEndTimeInputPlaceholder:"End Time",nowDateButton:"Now",confirmDateButton:"Confirm",cancelTimeButton:"Cancel",clearButton:"Clear"}},F.fn.datepicker=function(a){var n,i=l(arguments,1),a=a||{};return this.each(function(){var e,t=F(this).data("datepicker");if(!t){if(/destroy/.test(a))return!1;if("string"!=typeof a)return F(this).data("datepicker",t=new r(F(this),a))}t&&"string"==typeof a&&F.isFunction(e=t[a])&&(n=e.apply(t,i))}),void 0===n?this:n},F.fn.datepicker.Constructor=r,F.fn.datepicker.lang=r.LANG,F.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},F.getTotalDayCountOfMonth=function(e,t){var a=[31,28,31,30,31,30,31,31,30,31,30,31][t];return F.isLeapYear(e)&&1===t&&a++,a},F.getWeekDay=function(e,t,a){return(a=new Date(e,t-1,a)).getDay()},F.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},F.getStartDateOfMonth=function(e,t){var a=new Date(e,t,1),n=a.getDay();return 0===n?a.setTime(a.getTime()-7*b):a.setTime(a.getTime()-b*n),a},F.getWeekNumber=function(e){var t,a=new Date(e.getTime());return a.setHours(0,0,0,0),a.setDate(a.getDate()+3-(a.getDay()+6)%7),t=new Date(a.getFullYear(),0,4),1+Math.round(((a.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},F.getPrevMonth=function(e){var t=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=new Date,r=0===a?t-1:t,l=0===a?11:a-1,o=F.getTotalDayCountOfMonth(r,l);return i.setMonth(l),i.setFullYear(r),o<n&&i.setDate(o),new Date(i.getTime())},F.getNextMonth=function(e){var t=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=new Date,r=11===a?t+1:t,l=11===a?0:a+1,o=F.getTotalDayCountOfMonth(r,l);return i.setMonth(l),i.setFullYear(r),o<n&&i.setDate(o),new Date(i.getTime())},F.getPrevYear=function(e){var t=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=new Date,r=t-1,l=a,o=F.getTotalDayCountOfMonth(r,l);return i.setMonth(l),i.setFullYear(r),o<n&&i.setDate(o),new Date(i.getTime())},F.getNextYear=function(e){var t=e.getFullYear(),a=e.getMonth(),n=e.getDate(),i=new Date,r=t+1,l=a,o=F.getTotalDayCountOfMonth(r,l);return i.setMonth(l),i.setFullYear(r),o<n&&i.setDate(o),new Date(i.getTime())},F.clearHours=function(e){var t=new Date(e);return t.setHours(0,0,0,0),t.getTime()},F.formatDate=function(e,t){return e=new Date(e),isNaN(e.getTime())?null:e?moment(e).format(t||"YYYY-MM-DD"):""},F.parseDate=function(e,t){return moment(e,t||"YYYY-MM-DD").toDate()}});